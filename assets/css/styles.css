/* assets/css/styles.css */
:root{
  --panel:rgba(10,10,12,.75);
  --panel-border:rgba(255,255,255,.14);
  --ink:#f4f4f7; --ink-dim:#cfd2d6;
  --accent:#ff8a2a;
  --ok:#19c37d; --ko:#f55;
  --crosshair-core:#ffffff;
}

body::after{
  content:"";
  position:fixed; inset:0; z-index:7000; pointer-events:none;
  background-color: var(--crosshair-core);
  opacity:.08;
  -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='23' y='19' width='2' height='10' rx='1' fill='%23000'/%3E%3Crect x='19' y='23' width='10' height='2' rx='1' fill='%23000'/%3E%3C/svg%3E");
  mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='23' y='19' width='2' height='10' rx='1' fill='%23000'/%3E%3Crect x='19' y='23' width='10' height='2' rx='1' fill='%23000'/%3E%3C/svg%3E");
  -webkit-mask-size:30px 30px; mask-size:30px 30px;
  -webkit-mask-repeat:repeat; mask-repeat:repeat;
}

/* Screen frame */
.screen-frame{
  position:fixed;
  inset:3rem;
  border:2px solid #fff;
  background:transparent;
  pointer-events:none;
  z-index:9000;
  opacity:0.5;
  box-sizing:border-box;
}

/* Base */
html, body {
  height:100%; margin:0; background:#000; color:var(--ink);
  font-family: "Space Grotesk", sans-serif;
  font-optical-sizing:auto;
  font-weight:400;
  overscroll-behavior: none;
}
#map { position:fixed; inset:0; width:100vw; height:100vh; touch-action:none; }

/* curseur masqué sur carte, visible sur contrôles */
#map, #map .gm-style, #map .gm-style * { cursor: none !important; }
#map .gm-style button, #map .gm-style input, #map .gm-style select,
#map .gm-style .gm-bundled-control, #map .gm-style .gm-fullscreen-control,
#map .gm-style .gm-style-mtc, #map .gm-style .gm-control-active,
.gm-svpc{ cursor:auto !important; }

/* No transforms to avoid degrading 3D */
#map .gm-style, #map .gm-style > div, #map .gm-style img { backface-visibility:hidden; }

/* HUD */
.hud{
  position:fixed; left:50%; bottom:25px; transform:translateX(-50%);
  z-index:9001; pointer-events:none;
}
.hud .panel{
  pointer-events:auto;
  background:var(--panel);
  border:1px solid var(--panel-border);
  border-radius:14px;
  padding:12px 14px;
  backdrop-filter: blur(6px);
  display:grid;
  grid-template-areas:"header" "stats" "controls";
  row-gap:12px;
}
.row.header{ grid-area: header; }
.row.stats{ grid-area: stats; }
.row.controls-row{ grid-area: controls; }

/* Target */
.target{ display:flex; align-items:center; gap:16px; justify-content:center; text-align:center; }
.flag{
  width:clamp(56px, 6vw, 96px);
  height:clamp(36px, 4vw, 64px);
  object-fit:cover;
  border-radius:4px; border:1px solid rgba(255,255,255,.18);
}
.target-name{ font-weight:800; font-size:clamp(22px, 3.6vw, 36px); letter-spacing:.2px; }

/* Stats */
.meta{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.pill{
  font-size:12px; padding:3px 8px; border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.14);
  color:var(--ink-dim);
}

/* Controls */
.controls-row{ display:flex; align-items:end; justify-content:center; gap:12px; flex-wrap:wrap; }
.ctrl{ display:flex; flex-direction:column; gap:4px; min-width:160px; }
.ctrl-inline .checkbox{ display:flex; align-items:center; gap:8px; height:100%; padding-top:18px; }
label{ font-size:12px; opacity:.9; }
select,button{
  font:inherit; font-size:14px; padding:8px 12px; border-radius:10px;
  border:1px solid rgba(255,138,42,.35); color:#fff; cursor:pointer; background:#14161a;
}
select:hover{ background:#1b2027 }
button.primary{ background:var(--accent); border-color:var(--accent); color:#111 }
button.ghost{ background:rgba(255,138,42,.10) }
button[disabled]{ opacity:.5; cursor:not-allowed }
.btns{ display:flex; gap:8px; }

/* Mini controls + Aide (en haut à droite) */
.mini-ctrl{
  position:fixed; right:12px; top:12px; z-index:10000;
  display:flex; flex-direction:column; align-items:flex-end; gap:8px;
}
.mini-ctrl button{
  background:rgba(255,255,255,.06); color:var(--ink);
  border:1px solid var(--panel-border); padding:8px 12px;
  border-radius:10px; cursor:pointer; align-self:flex-end;
}
.help-card{
  pointer-events:auto;
  background:rgba(0,0,0,.75);  /* fond sombre pour lisibilité */
  color:#fff;                  /* texte blanc, au 1er plan */
  border:1px solid var(--panel-border);
  border-radius:12px;
  padding:12px 14px;
  font-size:13px; line-height:1.4;
  box-shadow:0 6px 24px rgba(0,0,0,.35);
  max-width:320px;
}

/* Pegman : transparent + calé à gauche du bouton Reset (ajusté dynamiquement en JS) */
.gm-svpc{
  position:fixed !important;
  top:12px !important;
  left:auto !important;             /* force ignore left */
  right:96px !important;            /* valeur par défaut (sera écrasée en JS) */
  background:transparent !important;
  box-shadow:none !important;
  border:none !important;
  z-index:10001 !important;
}
.gm-svpc *, .gm-style .gm-svpc, .gm-style .gm-svpc *{
  background:transparent !important;
  box-shadow:none !important;
  border:none !important;
}

/* Flash */
.screen-flash{ position:fixed; inset:0; pointer-events:none; z-index:5000; background:rgba(231,76,60,0); opacity:0; }
.screen-flash.show{ animation:screenFlash 280ms ease }
@keyframes screenFlash{
  0%{ background:rgba(231,76,60,0); opacity:0; }
  35%{ background:rgba(231,76,60,.22); opacity:1; }
  100%{ background:rgba(231,76,60,0); opacity:0; }
}

/* Crosshair */
.aim-overlay{ position:fixed; inset:0; z-index:4500; pointer-events:none; opacity:0; transition:opacity .12s ease; }
.ready .aim-overlay{ opacity:1; }
@media (pointer: coarse){ .aim-overlay{ display:none; } }
.aim-line{ position:absolute; will-change:transform, opacity; background:none; opacity:1; mix-blend-mode:normal; transform: translate3d(0,0,0); }
.aim-line.v{ top:0; bottom:0; width:2px; background: var(--crosshair-core); }
.aim-line.h{ left:0; right:0; height:2px; background: var(--crosshair-core); }
.aim-dot{ position:absolute; width:18px; height:18px; transform: translate3d(-9px,-9px,0); will-change:transform; }
.aim-dot::before, .aim-dot::after{ content:""; position:absolute; left:50%; top:50%; background: var(--crosshair-core); }
.aim-dot::before{ width:2px; height:18px; transform:translate(-50%,-50%); }
.aim-dot::after { width:18px; height:2px; transform:translate(-50%,-50%); }

/* Distance dialog */
.distance-dialog{
  position:fixed;
  left:0; top:0; transform:translate(-50%,-100%);
  font-weight:800;
  font-size:clamp(28px, 3.8vw, 48px);
  color:#fff;
  pointer-events:none;
  opacity:0;
  transition:opacity .12s ease;
  text-shadow:0 0 8px rgba(0,0,0,.6);
  z-index:6000;
}
.distance-dialog.show{ opacity:1; }

/* Perf */
.hud, .mini-ctrl{ content-visibility:auto; contain-intrinsic-size:200px 100px; }

/* Responsive */
@media (max-width: 720px){
  .hud .panel{ width:min(96vw, 560px); }
  .ctrl{ min-width:calc(50% - 6px); }
  .btns{ width:100%; justify-content:stretch; }
  .btns > *{ flex:1 1 auto; }
}

html, body, body *{
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* === AJOUTER DANS assets/css/styles.css === */

/* 1) Cacher le bouton "Reset view" du panneau bas */
#resetBtn{ display:none !important; }

/* 2) Donner au Reset (haut-droite) le style du bouton Next */
#btnReset{
  background:var(--accent) !important;
  border-color:var(--accent) !important;
  color:#111 !important;
}

/* 3) Décaler le Reset et Pegman plus vers la gauche tout en gardant Pegman à gauche du Reset */
:root{
  --hudTopRightOffset: 60px; /* augmentez pour aller plus à gauche */
  --pegmanGap: 95px;          /* conserve l'écart actuel entre Pegman et Reset */
}
.mini-ctrl{ right:var(--hudTopRightOffset) !important; }
.gm-svpc{ right:calc(var(--hudTopRightOffset) + var(--pegmanGap)) !important; }
